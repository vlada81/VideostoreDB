@using VideostoreDB.Models

@model VideostoreDB.ViewModel.MovieGenreViewModel

@{
    ViewBag.Title = "Edit";

    var genreId = Model.Movie.Genre.GenreId;
}

<h2>Edit a Movie</h2>
<br />
<form class="form-horizontal" method="post" action="/movie/edit/@Model.Movie.MovieId">
    <fieldset>
        <legend>Edit movie: @Model.Movie.Name</legend>
        <!-- START    Dodali smo polje ID kako bi preneo taj podatak Akciji, ali smo ga postavli na hidden da se nevidi na formi  -->
        <div class="form-group" hidden>
            <label for="id" class="col-lg-2 control-label">Id</label>
            <div class="col-lg-10">
                <input type="text" class="form-control" name="MovieId" value="@Model.Movie.MovieId" />
            </div>
        </div>
        <!--  END  -->
        <div class="form-group">
            <label for="name" class="col-lg-2 control-label">Name</label>
            <div class="col-lg-10">
                <input type="text" class="form-control" name="Name" value="@Model.Movie.Name" required />
            </div>
        </div>
        <div class="form-group">
            <label for="price" class="col-lg-2 control-label">Price</label>
            <div class="col-lg-10">
                <input type="text" class="form-control" name="Price" value="@Model.Movie.Price" step="0.01" required />
            </div>
        </div>
        <div class="form-group">
            <label for="genre" class="col-lg-2 control-label">Genre</label>
            <div class="col-lg-10">
                <select class="form-control" name="Genre.GenreId" value="@genreId">
                    @foreach (Genre g in Model.Genres)
                    {
                        <option @( (genreId == g.GenreId) ? "selected": "") value="@g.GenreId">@g.GenreName</option>
                    }
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="price" class="col-lg-2 control-label">Release Date</label>
            <div class="col-lg-10">
                <input type="number" class="form-control" name="ReleaseDate" value="@Model.Movie.ReleaseDate" required />
            </div>
        </div>
        <div class="form-group">
            <div class="col-lg-10 col-lg-offset-2">
                <a class="btn btn-default" href="/movie/index">Cancel</a>
                <input type="submit" class="btn btn-primary" value="Save Changes" />
            </div>
        </div>
    </fieldset>
</form>